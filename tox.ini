[tox]
envlist = py{38,39,310}

# Comment to build sdist and install into virtualenv
# This is helpful to test installation but takes extra time
skipsdist = True

[testenv]
commands =
    pytest {posargs: tests}
deps =
    -rrequirements.txt
    pytest
    python-dotenv
platform = linux2|darwin

[testenv:integration]
envlist = py{38,39,310}
commands =
    pytest -m "integration"
deps =
    -rrequirements.txt
    pytest
    python-dotenv
platform = linux2|darwin

[testenv:linting]
commands =
    isort --gitignore --check-only --diff --skip .tox --skip .venv .
    flake8
deps =
    isort
    flake8

[flake8]
max-line-length = 100
extend-ignore = W391
exclude = .git,.venv,.tox

[pytest]
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests (deselect with '-m "not integration"')
